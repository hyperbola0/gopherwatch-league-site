<!DOCTYPE html>
<html>
	<head>
		<title> Schedule - The Gopherwatch League </title>
		<link rel="stylesheet" type="text/css" href="/css/style.css">
		<link rel="stylesheet" type="text/css" href="/css/schedule.css">
		<meta charset="UTF-8">
		<meta name="robots" content="noindex">
		<script src="https://code.jquery.com/jquery-1.10.2.js"></script>
		<script src="/js/sortable-table.js"></script>
		<script src="/js/schedule-page.js"></script>
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

	</head>
	<body>
		<h1 class="center">The Gopherwatch League</h1>
		<!-- navbar -->
		<div id="nav-placeholder"></div>
		
		<script>
		$(function(){
			$("#nav-placeholder").load("/html/nav.html");
		});
		</script>
		
		<div class="center">
			<div id="rounds-div">
			
			</div>
		</div>
		<script type="text/javascript">
		function doAjax() {
			// create AJAX request for standingsTable
			var xhttp = new XMLHttpRequest();
			xhttp.open("GET", "/api/matchlog", true);
			xhttp.send();
			
			// runs when response is received
			xhttp.onreadystatechange = function() {
				if(this.readyState == 4 && this.status == 200){
					console.log(xhttp.responseText);
					var jsonObj = JSON.parse(xhttp.responseText);
					loadTable(jsonObj);
				} else {
					if(xhttp.status != 200) {
						alert(xhttp.status);
					}
				}
			}
		}
		
		// loads table into HTML
		function loadTable(jsonObj) {
			loadLog(jsonObj);
			var week = jsonObj.currentround;
			
			document.getElementById("rounds-div").innerHTML += '<h1 class="sched-header">Upcoming Rounds</h1>';
			for(var i=week; i<10; i++) {
				addRoundTable(i);
			}
			
			document.getElementById("rounds-div").innerHTML += '<h1 class="sched-header">Previous Rounds</h1>';
			for(i=1; i<week; i++) {
				addRoundTable(i);
			}
		}
		
		window.onload = doAjax;
		</script>
		
	</body>
</html>